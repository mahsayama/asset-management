<div class="table-responsive fade-in">
    <table class="table table-hover align-middle text-center mb-0">
        <thead>
            <tr>
                <th>Nama Aset</th>
                <th style="min-width: 140px;">Barcode / SN</th>            
                <th class="d-none d-md-table-cell">Kategori</th>
                <th class="d-none d-md-table-cell">Lokasi</th>
                <th style="min-width: 160px;">User / Dept Saat Ini</th>
                <th class="d-none d-xl-table-cell text-muted">History User</th> 
                <th>Status</th>
                <th class="d-none d-lg-table-cell">Harga</th>
                <th style="min-width: 120px;">Aksi</th> 
            </tr>
        </thead>
        <tbody>
            {% for asset in assets %}
            <tr>
                <td>
                    <div class="fw-bold text-dark">{{ asset.name }}</div>
                    <small class="text-muted d-block d-md-none font-monospace mt-1">{{ asset.serial_number }}</small>
                </td>
                <td>
                    {% if asset.barcode_id %}
                        <div class="badge bg-light text-dark border mb-1 font-monospace">{{ asset.barcode_id }}</div>
                    {% endif %}
                    <div class="small text-muted font-monospace d-none d-md-block">{{ asset.serial_number }}</div>
                </td>
                <td class="d-none d-md-table-cell">{{ asset.kategori|default:"-" }}</td>
                <td class="d-none d-md-table-cell">{{ asset.lokasi|default:"-" }}</td>
                <td>
                    <div class="fw-medium text-dark">{{ asset.current_user|default:"-" }}</div>
                    <small class="text-muted d-block">{{ asset.current_dept|default:"" }}</small>
                </td>
                <td class="d-none d-xl-table-cell small text-muted text-start ps-4">
                    <div><i class="bi bi-clock-history"></i> {{ asset.prev_user|default:"-" }}</div>
                    <div><i class="bi bi-building"></i> {{ asset.prev_dept|default:"-" }}</div>
                </td>
                <td>
                    {% if asset.status == 'TERSEDIA' %}
                        <span class="badge bg-success bg-opacity-10 text-success border border-success-subtle px-2 py-1 fw-medium">Tersedia</span>
                    {% elif asset.status == 'DIPAKAI' %}
                        <span class="badge bg-primary bg-opacity-10 text-primary border border-primary-subtle px-2 py-1 fw-medium">Sedang Dipakai</span>
                    {% elif asset.status == 'RUSAK' %}
                        <span class="badge bg-danger bg-opacity-10 text-danger border border-danger-subtle px-2 py-1 fw-medium">Rusak</span>
                    {% else %}
                        <span class="badge bg-warning bg-opacity-10 text-dark border border-warning-subtle px-2 py-1 fw-medium">Hilang</span>
                    {% endif %}
                </td>
                <td class="d-none d-lg-table-cell font-monospace">Rp {{ asset.price }}</td>
                <td>
                    <a href="{% url 'asset_detail' asset.pk %}" class="btn btn-action btn-info text-white shadow-sm mx-1" title="Detail" data-bs-toggle="tooltip">
                        <i class="bi bi-eye-fill small"></i>
                    </a>
                    <a href="{% url 'asset_update' asset.pk %}" class="btn btn-action btn-warning text-white shadow-sm mx-1" title="Edit" data-bs-toggle="tooltip">
                        <i class="bi bi-pencil-fill small"></i>
                    </a>
                    <a href="{% url 'asset_delete' asset.pk %}" class="btn btn-action btn-danger shadow-sm" title="Hapus" data-bs-toggle="tooltip">
                        <i class="bi bi-trash-fill small"></i>
                    </a>
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="9" class="text-center py-5">Belum ada data.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="mt-4" id="pagination-container">
    <p class="text-center text-muted small mb-3">
        Menampilkan data <b>{{ assets.start_index }}</b> - <b>{{ assets.end_index }}</b> dari total <b>{{ assets.paginator.count }}</b> aset
    </p>

    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center gap-1" 
            hx-boost="true" 
            hx-target="#table-container" 
            hx-swap="innerHTML"
            hx-push-url="true"> 
            
            {% if assets.has_previous %}
                <li class="page-item">
                    <a class="page-link border-0 rounded-circle shadow-sm d-flex align-items-center justify-content-center" 
                       style="width: 35px; height: 35px;"
                       href="?page={{ assets.previous_page_number }}&per_page={{ per_page }}&q={{ query|default:'' }}&category={{ category_filter|default:'' }}&location={{ location_filter|default:'' }}&status={{ status_filter|default:'' }}">
                        <i class="bi bi-chevron-left small"></i>
                    </a>
                </li>
            {% else %}
                <li class="page-item disabled">
                    <span class="page-link border-0 rounded-circle bg-transparent text-muted d-flex align-items-center justify-content-center" style="width: 35px; height: 35px;">
                        <i class="bi bi-chevron-left small"></i>
                    </span>
                </li>
            {% endif %}

            {% for num in assets.paginator.page_range %}
                {% if assets.number == num %}
                    <li class="page-item active">
                        <span class="page-link border-0 rounded-circle shadow fw-bold d-flex align-items-center justify-content-center" style="width: 35px; height: 35px; background-color: #4e73df;">{{ num }}</span>
                    </li>
                {% elif num > assets.number|add:'-3' and num < assets.number|add:'3' %}
                    <li class="page-item">
                        <a class="page-link border-0 rounded-circle shadow-sm text-secondary d-flex align-items-center justify-content-center bg-white" style="width: 35px; height: 35px;" href="?page={{ num }}&per_page={{ per_page }}&q={{ query|default:'' }}&category={{ category_filter|default:'' }}&location={{ location_filter|default:'' }}&status={{ status_filter|default:'' }}">
                            {{ num }}
                        </a>
                    </li>
                {% endif %}
            {% endfor %}

            {% if assets.has_next %}
                <li class="page-item">
                    <a class="page-link border-0 rounded-circle shadow-sm d-flex align-items-center justify-content-center" 
                       style="width: 35px; height: 35px;"
                       href="?page={{ assets.next_page_number }}&per_page={{ per_page }}&q={{ query|default:'' }}&category={{ category_filter|default:'' }}&location={{ location_filter|default:'' }}&status={{ status_filter|default:'' }}">
                        <i class="bi bi-chevron-right small"></i>
                    </a>
                </li>
            {% else %}
                <li class="page-item disabled">
                    <span class="page-link border-0 rounded-circle bg-transparent text-muted d-flex align-items-center justify-content-center" style="width: 35px; height: 35px;">
                        <i class="bi bi-chevron-right small"></i>
                    </span>
                </li>
            {% endif %}
        </ul>
    </nav>
</div>